## 운영체제를 알아야 하는 이유

### 운영체제란

- 프로그램 실행에 마땅히 필요한 요소들을 가리켜 **시스템 자원**, 혹은 **자원**이라고 한다.
- ex. CPU, 메모리, 보조기억장치, 입출령장치 등
- **_실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 프로그램_** 이 **운영체제** 이다.
- 운영체제는 컴퓨터가 부팅될 때 메모리 내 커널 영역이라는 공간에 따로 적재되어 실행된다.
- 커널 영역을 제외한 나머지 영역, 사용자가 이용하는 응용 프로그램이 적재되는 영역을 사용자 영역이라고 한다.
- 즉, 운영체제는 커널 영역에 적재되어 사용자 영역에 적재된 프로그램들에 자원을 할당하고 이들이 올바르게 실행되도록 돕는다.
  ![운영체제](https://github.com/zhwltlr/CS-Study/assets/100506719/e2dbceaf-2011-4a0d-9a8e-08ad22df3857)
- 운영체제는 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 메모리 자원을 관리한다.
- 운영체제는 최대한 공정하게 여러 프로그램에 CPU 자원을 할당한다.
  ![운영체제할당](https://github.com/zhwltlr/CS-Study/assets/100506719/1423a974-7f50-41aa-820a-1d99989c9100)

### 운영체제를 알아야 하는 이유

- 운영체제는 현재 하드웨어의 상태는 어떠한지, 코드가 어떻게 실행되었는지, 하드웨어 상에 어떤 문제가 있었는지 알려주기 때문에 개발자들이 문제 해결의 실마리를 찾을 수 있다.

## 운영체제의 큰 그림

### 운영체제의 심장, 커널

- 운영체제가 응용 프로그램에 제공하는 서비스 종류는 다양하지만 가장 핵심적인 서비스들이 있다.
- 자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능
- 이렇게 핵심 서비스를 담당하는 부분을 **커널**이라고 한다.
- 어떤 커널을 사용하는지에 따라 개발자가 실행하고 개발하는 프로그램이 하드웨어를 이용하는 양상이 달라지고 컴퓨터의 전체적인 성능도 달라질 수 있다.

![커널](https://github.com/zhwltlr/CS-Study/assets/100506719/d643b797-8356-4372-8585-9cb8415ba2ba)

- 운영체제가 제공하는 서비스 중 커널에 포함되지 않은 서비스도 있다.(ex.사용자 인터페이스)
- 사용자 인터페이스
  - 그래픽 유저 인터페이스 : 그래픽을 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스
  - 커맨드 라인 인터페이스 : 명령어를 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스

### 이중 모드와 시스템 호출

- 응용 프로그램이 CPU, 메모리, 하드 디스크 등에 마음대로 접근 및 조작을 할 수 있다면 악영향을 끼친다.
- 따라서 운영체제는 응용 프로그램들이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록 하여 자원을 보호한다.
- 응용 프로그램의 요청을 받은 운영체제는 응용 프로그램 대신 자원에 접근하여 요청한 작업을 수행한다.
  ![시스템호출](https://github.com/zhwltlr/CS-Study/assets/100506719/f0c23661-74e3-4e51-85be-5c7b96b4d5ac)
- 이러한 운영체제의 역할은 이중 모드로써 구현된다.

#### 이중모드 : CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식

- **_사용자 모드_** : 운영체제 서비스를 제공받을 수 없는 실행 모드이다. 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행된다. 사용자 모드로 실행되는 일반적인 응용 프로그램은 자원에 접근할 수 없다.
- **_커널 모드_** : 운영체제 서비스를 제공받을 수 있는 실행 모드이다. 즉, 커널 영역의 코드를 실행할 수 있는 모드이다. CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령을 비롯한 모든 명령어를 실행할 수 있다.

#### 시스템 호출 : 사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야 하는데 이 요청을 시스템 호출이라고 한다.

- 시스템 호출은 인터럽트를 발생시키는 특정 명령어에 의해 발생하는 _소프트웨어 인터럽트_ 이다.
- 시스템 호출을 발생시키는 명령어가 실행되면 CPU는 지금까지의 작업을 백업하고, 커널 영역 내에 시스템 호출을 수행하는 코드(인터럽트 서비스 루틴)를 실행한 뒤 다시 기존에 실행하던 응용 프로그램으로 복귀하여 실행을 계속해 나간다.
  ![시스템호출2](https://github.com/zhwltlr/CS-Study/assets/100506719/841a73a9-45c1-4cbd-ad63-5a97d7eb6287)

### 운영체제의 핵심 서비스

#### 프로세스 관리

- 프로세스 : 실행 중인 프로그램
- CPU는 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복한다.

#### 자원 접근 및 할당

- CPU : 일반적으로 메모리에는 여러 프로세스가 적재되고, 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있다.
  - 운영체제는 프로세스들에 공정하게 CPU를 할동하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 CPU를 이용하게 할지 결정할 수 있어야 하는데 이를 CPU 스케줄링이라 한다.
- 메모리 : 운영체제는 새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정해야 한다.
- 입출력장치 : 운영체제는 인터럽트를 처리하는 프로그램, 즉 인터럽트 서비스 루틴을 제공함으로써 입출력 작업을 수행한다.

#### 파일 시스템 관리
